name: Deploy Back-end via FTP

on:
  push:
    branches:
      - main                       # ğŸ”’ Deploy apenas da branch principal
    paths:
      - '**/*'                     # Monitorar todas as alteraÃ§Ãµes
  workflow_dispatch:              # Permite disparo manual no GitHub

jobs:
  deploy:
    name: ğŸš€ Deploy Back-end
    runs-on: ubuntu-latest

    steps:
      - name: âœ… Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0           # Para histÃ³rico completo, caso necessÃ¡rio

      - name: âš™ï¸ Prepare artifacts
        run: |
          # Aqui vocÃª pode inserir comandos de build, testes ou lint
          echo "Nenhuma etapa de build definida â€“ ajustÃ¡vel conforme stack."

      - name: ğŸ“‚ Deploy via FTP
        uses: SamKirkland/FTP-Deploy-Action@4.3.0
        with:
          server:    ${{ secrets.FTP_HOST }}
          username:  ${{ secrets.FTP_USERNAME }}
          password:  ${{ secrets.FTP_PASSWORD }}
          local-dir: ./               # Evita subir arquivos do root do runner
          server-dir: /htdocs/
          clean: true                 # Remove arquivos obsoletos do servidor
